!function(a){"use strict";a.fn.twittie=function(){var b=arguments[0]instanceof Object?arguments[0]:{},c="function"==typeof arguments[0]?arguments[0]:arguments[1],d=a.extend({username:null,list:null,hashtag:null,count:10,hideReplies:!1,dateFormat:"%b/%d/%Y",template:"{{date}} - {{tweet}}",apiPath:"api/tweet.php"},b);d.list&&!d.username&&a.error("If you want to fetch tweets from a list, you must define the username of the list owner.");var e=function(a){var b=a.replace(/(https?:\/\/([-\w\.]+)+(:\d+)?(\/([\w\/_\.]*(\?\S+)?)?)?)/gi,'<a href="$1" target="_blank" title="Visit this link">$1</a>').replace(/#([a-zA-Z0-9_]+)/g,'<a href="http://twitter.com/search?q=%23$1&amp;src=hash" target="_blank" title="Search for #$1">#$1</a>').replace(/@([a-zA-Z0-9_]+)/g,'<a href="http://twitter.com/$1" target="_blank" title="$1 on Twitter">@$1</a>');return b},f=function(a){var b=a.split(" ");a=new Date(Date.parse(b[1]+" "+b[2]+", "+b[5]+" "+b[3]+" UTC"));for(var c=["January","February","March","April","May","June","July","August","September","October","November","December"],e={"%d":a.getDate(),"%m":a.getMonth()+1,"%b":c[a.getMonth()].substr(0,3),"%B":c[a.getMonth()],"%y":String(a.getFullYear()).slice(-2),"%Y":a.getFullYear()},f=d.dateFormat,g=d.dateFormat.match(/%[dmbByY]/g),h=0,i=g.length;i>h;h++)f=f.replace(g[h],e[g[h]]);return f},g=function(a){for(var b=d.template,c=["date","tweet","avatar","url","retweeted","screen_name","user_name","image"],e=0,f=c.length;f>e;e++)b=a[c[e]]?b.replace(new RegExp("{{"+c[e]+"}}","gi"),a[c[e]]):b.replace(new RegExp("{{"+c[e]+"}}","gi"),"");return b};this.html("<span>Loading...</span>");var h=this;a.getJSON(d.apiPath,{username:d.username,list:d.list,hashtag:d.hashtag,count:d.count,exclude_replies:d.hideReplies},function(a){h.find("span").fadeOut("fast",function(){h.html("<ul></ul>");for(var b=0;b<d.count;b++){var i=!1;if(a[b])i=a[b];else{if(void 0===a.statuses||!a.statuses[b])break;i=a.statuses[b]}var j={user_name:i.user.name,date:f(i.created_at),tweet:e(i.retweeted?"RT @"+i.user.screen_name+": "+i.retweeted_status.text:i.text),avatar:'<img src="'+i.user.profile_image_url+'" />',url:"http://twitter.com/"+i.user.screen_name+"/status/"+i.id_str,retweeted:i.retweeted,screen_name:e("@"+i.user.screen_name),image:i.entities.media?"<img src='"+i.entities.media[0].media_url+"' />":!1};h.find("ul").append("<li>"+g(j)+"</li>")}"function"==typeof c&&c()})})}}(jQuery);